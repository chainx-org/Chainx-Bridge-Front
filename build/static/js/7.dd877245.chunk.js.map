{"version":3,"sources":["hooks/useAccountInfo.ts","hooks/useFormatBalance.ts","components/Redeem/style.tsx","page/Bridge/style.tsx","components/Issue/style.tsx","components/Issue/icons/btc.svg","components/Issue/index.tsx","hooks/useXbtcAssets.ts","components/Redeem/index.tsx","components/TransactionBubble/style.tsx","components/TransactionBubble/icons/insert.svg","components/TransactionBubble/IssueBubble.tsx","components/TransactionBubble/RedeemBubble.tsx","hooks/useLeftBlock.ts","page/Bridge/icons/redWarning.svg","page/Bridge/icons/warning2.svg","page/Bridge/index.tsx","hooks/useTab.ts"],"names":["useAccountInfo","account","useState","accountInfo","setAccountInfo","useApi","api","isApiReady","useEffect","a","query","system","info","fetchData","unsubscribe","rpc","chain","subscribeFinalizedHeads","header","FormatBalance","balance","toFixed","toString","toNumber","RedeemStyle","styled","div","RedeemBtcInputStyle","XBtcBalanceStyle","BtcAddressStyle","RedeemFooterStyle","footer","BridgeStyle","BridgeCardStyle","FunctionSwitchButton","IssueModalStyle","IssueModalTip","IssueTransferInfoStyle","VaultBtcAddressStyle","VaultOpReturnStyle","IssueModalFooter","RedeemModalStyle","RedeemModalTip","RedeemTimeStyle","CancelRedeemStyle","RedeemModalFooterStyle","IssueStyle","CurrentAccountStyle","IssueBtcInputStyle","LockingCollateralStyle","IssueFooterStyle","ConfirmationIssueModalStyle","ConfirmationIssueModalFooter","VaultAccountStyle","PCXbalanceStyle","Issue","pcxPrice","useContext","FeeContext","currentAccount","useAccountModel","t","useTranslation","confirmationIssue","setConfirmationIssue","IssueAmount","setIssueAmount","vaultAddress","setVaultAddress","vaultBtcAddress","setVaultBtcAddress","vaultButtonLoading","SetVaultButtonLoading","address","web3FromAddress","injector","tx","xGatewayBitcoinV2","requestIssue","signAndSend","signer","status","dispatchError","events","isInBlock","notification","message","asInBlock","duration","isModule","decoded","registry","findMetaError","asModule","documentation","name","section","join","type","catch","error","handleMatchVault","warn","vaults","entries","Promise","all","map","value","vault","unwrap","id","data","reserved","collateral","maxToken","muln","divn","sub","issuedTokens","toBeIssuedTokens","wallet","results","ChangeChainXAddress","JSON","parse","stringify","className","src","btcLogo","alt","onChange","e","free","loading","onClick","title","getContainer","visible","onCancel","encodeAddress","decodeAddress","useXbtcAssets","n","XbtcBalance","setXbtcBalance","xAssets","assetBalance","res","Usable","getAssets","WAValidator","require","Redeem","RedeemAmount","setRedeemAmount","BtcAddress","setBtcAddress","setN","handleReedem","validate","requestRedeem","target","TransactionBubbleStyle","IssueBubbleStyle","RedeemBubbleStyle","IssueBubble","BtcAmout","enterLogo","RedeemBubble","amount","leftBlock","openTime","setLeftBlock","unsub","subscribeNewHeads","head","Math","max","number","then","useLeftBlock","Date","toISOString","substr","Tab","Bridge","IssueRequestsContext","RedeemData","RedeemRequestsContext","IssueRequestList","SetIssueRequestList","RedeemRequestList","SetRedeemRequestList","polkaAccount","useMemo","issueList","requests","filter","item","requester","RedeemList","issueModalVisible","SetIssueModalVisible","RedeemModalVisible","SetRedeemModalVisible","issueClickId","SetissueClickId","RedeemClickId","SetRedeemClickId","activeTab","setActiveTab","isActive","tab","useTab","issueModalData","RedeemModalData","cancelRedeem","btcAmount","warningLogo","length","warningLogo2","btcAddress","stringToHex","substring","parseInt","disabled"],"mappings":"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","file":"static/js/7.dd877245.chunk.js","sourcesContent":["import {useApi} from './useApi'\r\nimport { AccountInfo } from \"@polkadot/types/interfaces\";\r\nimport { useEffect, useState} from \"react\";\r\n\r\nexport function useAccountInfo(account: string): AccountInfo | null {\r\n    const [accountInfo, setAccountInfo] = useState<AccountInfo | null>(null);\r\n    const { api, isApiReady } = useApi();\r\n  \r\n    useEffect(() => {\r\n      const fetchData = async () => {\r\n        if(account){\r\n          const info = await api.query.system.account(account);\r\n          setAccountInfo(info);\r\n        }else{\r\n          return\r\n        }\r\n      };\r\n  \r\n      if (isApiReady) {\r\n        fetchData();\r\n      }\r\n    }, [account, isApiReady]);\r\n  \r\n    useEffect(() => {\r\n      if (isApiReady) {\r\n        let unsubscribe = api.rpc.chain.subscribeFinalizedHeads(async header => {\r\n          if(account){\r\n            const info = await api.query.system.account(account);\r\n            setAccountInfo(info);\r\n          }else{\r\n            return\r\n          }\r\n        });\r\n  \r\n        return () => {\r\n          (async () => await unsubscribe)();\r\n        };\r\n      }\r\n      return () => {};\r\n    }, [account, isApiReady]);\r\n  \r\n    return accountInfo;\r\n  }","function FormatBalance(balance: { toNumber: () => number } | undefined | number) {\r\n    if (typeof balance === \"number\") {\r\n      return (balance / 100000000).toFixed(5).toString();\r\n    } else if (balance) {\r\n      return (balance!!.toNumber() / 100000000).toFixed(5).toString();\r\n    } else {\r\n      return \"-\";\r\n    }\r\n  }\r\n  export default FormatBalance;","import styled from \"styled-components\";\nimport React from \"react\";\n\nexport const RedeemStyle = styled.div`\n  margin-top: 20px;\n`\nexport const RedeemBtcInputStyle = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 40px;\n\n  .ant-input-number {\n    width: 200px;\n    height: 44px;\n    font-size: 32px;\n    color: #8E8E8E;\n    line-height: 44px;\n  }\n\n  .btc-title {\n    font-size: 32px;\n    color: #282828;\n    font-weight: bold;\n    margin-left: 16px;\n  }\n\n  img {\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n  }\n`\nexport const XBtcBalanceStyle = styled.div`\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  font-size: 14px;\n  color: #282828;\n  font-weight: bold;\n`\nexport const BtcAddressStyle = styled.div`\n  margin-top:16px;\n  .btc-address-info{\n    display: flex;\n    justify-content: space-between;\n    .btc-address-title{\n      font-size: 12px;\n      color: #282828;\n      font-weight: bold;\n    }\n    .btc-fee{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n  .ant-input {\n    width: 419px;\n    height: 44px;\n    font-size: 14px;\n    color: #8E8E8E;\n    line-height: 44px;\n    margin-top: 8px;\n  }\n`\nexport const RedeemFooterStyle = styled.footer`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .redeem-footer-title {\n    font-size: 12px;\n    color: #282828;\n  }\n\n  .redeem-footer-num {\n    font-size: 24px;\n    color: #282828;\n    margin-top: 8px;\n  }\n\n  button {\n    width: 419px;\n    height: 44px;\n    margin-top: 20px;\n  }\n`\n","import styled from \"styled-components\";\n\nexport const BridgeStyle = styled.div`\n  display: flex;\n  justify-content: space-between;\n`\nexport const BridgeCardStyle = styled.div`\n  width: 499px;\n  height: 524px;\n  border-radius: 10px;\n  background: #fff;\n  margin: 24px;\n  border: 1px solid #EFEFEF;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\n\nexport const FunctionSwitchButton = styled.div`\n  font-size: 16px;\n  font-weight: bold;\n  color: #8E8E8E;\n  ul{\n    width: 425px;\n    height: 48px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    background: #F6F6F6;\n    margin-top: 30px;\n    border-radius: 6px;\n  }\n  li{\n    width: 208px;\n    height: 44px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 6px;\n    &.active{\n      background: #fff;\n      color: #282828;\n    }\n  };\n`\n\nexport const IssueModalStyle = styled.div`\n  button{\n    border-radius: 0;\n    height: 40px;\n  }\n  position: absolute;\n  .ant-modal-body{\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n  }\n`\nexport const IssueModalTip = styled.div`\n  margin-top: 24px;\n  margin-left: 24px;\n  margin-right: 24px;\n  img{\n    width: 16px;\n    height: 16px;\n    margin-left:8px;\n    margin-right: 6px;\n  }\n  display: flex;\n  width: 470px;\n  height: 28px;\n  background: #FFEBE3;\n  border-radius: 6px;\n  align-items: center;\n`\nexport const IssueTransferInfoStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n align-items: center;\n  margin-top: 24px;\n  .info-title{\n    font-size: 12px;\n    color: #282828;\n  }\n  .transfer-amount{\n    margin-top: 4px;\n    font-size: 24px;\n    color: #282828;\n    font-weight: bold;\n  }\n  .transfer-tip{\n    img{\n      margin-right: 4px;\n    }\n    display: flex;\n  }\n`\n\nexport const VaultBtcAddressStyle =styled.div`\n  margin-right: 24px;\n  margin-left: 24px;\n  display: flex;\n  flex-direction: column;\n  margin-top: 24px;\n  .title{\n    font-size: 12px;\n    color: #282828;\n    font-weight: bold;\n  }\n  .address{\n    margin-top: 8px;\n    height: 40px;\n    background: #EFEFEF;\n    border-radius: 4px;\n    padding: 16px 12px;\n    display: flex;\n    align-items: center;\n  }\n`\nexport const VaultOpReturnStyle =styled.div`\n  margin-right: 24px;\n  margin-left: 24px;\n  display: flex;\n  flex-direction: column;\n  margin-top: 24px;\n  .title{\n    font-size: 12px;\n    color: #282828;\n    font-weight: bold;\n  }\n  .address{\n    margin-top: 8px;\n    height: 56px;\n    background: #EFEFEF;\n    border-radius: 4px;\n    padding: 16px 12px;\n    display: flex;\n    align-items: center;\n    word-break:break-all;\n  }\n`\nexport const IssueModalFooter = styled.div`\n  background: #F6F6F6;\n  margin-top: 30px;\n  padding: 24px;\n li{\n   display: flex;\n   justify-content: space-between;\n   margin-bottom: 12px;\n   .title{\n     font-size: 12px;\n     color: #8E8E8E;\n   }\n   .content{\n     font-size: 12px;\n     color: #282828;\n   }\n }\n`\n\nexport const RedeemModalStyle = styled.div`\n  position: absolute;\n  .ant-modal-body{\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n  }\n`\nexport const RedeemModalTip = styled.div`\n  padding: 4px;\n  margin-top: 24px;\n  margin-left: 24px;\n  margin-right: 24px;\n  img{\n    width: 16px;\n    height: 16px;\n    margin-left:8px;\n    margin-right: 6px;\n    margin-top: 4px;\n  }\n  display: flex;\n  width: 470px;\n  height: 100%;\n  background: #FFEBE3;\n  border-radius: 6px;\n`\nexport const RedeemTimeStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 24px;\n  .title{\n    font-size: 14px;\n    color: #282828;\n  }\n  .time{\n    font-size: 32px;\n    color: #EA754B;\n    font-weight: bold;\n  }\n`\nexport const CancelRedeemStyle =styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 24px;\n button{\n   width: 340px;\n   height: 44px;\n }\n  .force-redeem{\n    font-size: 14px;\n    color: #EA754B;\n    margin-top: 16px;\n  }\n`\nexport const RedeemModalFooterStyle = styled.div`\n  background: #F6F6F6;\n  margin-top: 30px;\n  padding: 24px;\n  li{\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 12px;\n    .title{\n      font-size: 12px;\n      color: #8E8E8E;\n    }\n    .content{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n`\n","import styled from \"styled-components\";\r\n\r\nexport const IssueStyle = styled.div`\r\n  margin-top: 20px;\r\n`\r\nexport const CurrentAccountStyle = styled.div`\r\n  background: #F6F6F6;\r\n  border-radius: 6px;\r\n  width: 419px;\r\n  height: 70px;\r\n  padding: 16px;\r\n  font-size: 12px;\r\n  color: #282828;\r\n\r\n  .current-account {\r\n    margin-top: 4px;\r\n    font-size: 12px;\r\n    color: #8E8E8E;\r\n  }\r\n`\r\nexport const IssueBtcInputStyle = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 40px;\r\n\r\n  .ant-input-number {\r\n    width: 200px;\r\n    height: 44px;\r\n    font-size: 32px;\r\n    color: #8E8E8E;\r\n    line-height: 44px;\r\n  }\r\n\r\n  .btc-title {\r\n    font-size: 32px;\r\n    color: #282828;\r\n    font-weight: bold;\r\n    margin-left: 16px;\r\n  }\r\n\r\n  img {\r\n    width: 32px;\r\n    height: 32px;\r\n    margin-right: 16px;\r\n  }\r\n`\r\nexport const LockingCollateralStyle = styled.div`\r\n  color: #282828;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 24px;\r\n\r\n  .locking-title {\r\n    font-size: 14px;\r\n  }\r\n\r\n  .locking-num {\r\n    margin-left: 8px;\r\n    font-size: 14px;\r\n  }\r\n\r\n  .locking-tip {\r\n    margin-left: 8px;\r\n    padding: 0 4px;\r\n    height: 20px;\r\n    background: #FDF5E0;\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n    color: #9B7E2E;\r\n    line-height: 20px;\r\n    text-align: center;\r\n  }\r\n`\r\nexport const IssueFooterStyle = styled.footer`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  .issue-footer-title {\r\n    font-size: 12px;\r\n    color: #282828;\r\n  }\r\n\r\n  .issue-footer-num {\r\n    font-size: 24px;\r\n    color: #282828;\r\n    margin-top: 8px;\r\n  }\r\n\r\n  button {\r\n    width: 419px;\r\n    height: 44px;\r\n    margin-top: 20px;\r\n  }\r\n`\r\nexport const ConfirmationIssueModalStyle = styled.div`\r\n  position: absolute;\r\n  display: flex;\r\n  .ant-modal-body{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n`\r\nexport const ConfirmationIssueModalFooter = styled.div`\r\n  margin-top: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  .issue-footer-title {\r\n    font-size: 12px;\r\n    color: #282828;\r\n  }\r\n\r\n  .issue-footer-num {\r\n    font-size: 24px;\r\n    color: #282828;\r\n    margin-top: 8px;\r\n  }\r\n\r\n`\r\nexport const VaultAccountStyle = styled.div`\r\n  margin-top: 10px;\r\n  background: #F6F6F6;\r\n  border-radius: 6px;\r\n  width: 419px;\r\n  height: 70px;\r\n  padding: 16px;\r\n  font-size: 12px;\r\n  color: #282828;\r\n\r\n  .current-account {\r\n    margin-top: 4px;\r\n    font-size: 12px;\r\n    color: #8E8E8E;\r\n  }\r\n`\r\nexport const PCXbalanceStyle = styled.div`\r\nmargin-top: 20px;\r\ndisplay: flex;\r\njustify-content: center;\r\nfont-size: 14px;\r\ncolor: #282828;\r\nfont-weight: bold;\r\n\r\n`\r\n\r\n","export default __webpack_public_path__ + \"static/media/btc.2bbb551b.svg\";","import { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  ConfirmationIssueModalFooter,\r\n  ConfirmationIssueModalStyle,\r\n  CurrentAccountStyle,\r\n  IssueBtcInputStyle,\r\n  IssueFooterStyle,\r\n  IssueStyle,\r\n  LockingCollateralStyle,\r\n  VaultAccountStyle,\r\n  PCXbalanceStyle,\r\n} from \"./style\";\r\nimport btcLogo from \"./icons/btc.svg\";\r\nimport { InputNumber, Divider, Button, Modal, notification } from \"antd\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useAccountModel from \"../../hooks/useAccountModel\";\r\nimport { useApi } from \"../../hooks/useApi\";\r\nimport { BtcAddress, RpcVaultInfo } from \"../../interfaces\";\r\nimport { FeeContext } from \"../../hooks/useFeeContext\";\r\nimport { decodeAddress, encodeAddress } from \"@polkadot/keyring\";\r\nimport ChangeChainXAddress from \"../../util\";\r\nimport { web3FromAddress } from \"@polkadot/extension-dapp\";\r\nimport { useAccountInfo } from \"../../hooks/useAccountInfo\";\r\nimport FormatBalance from \"../../hooks/useFormatBalance\";\r\nimport { AccountId } from \"@polkadot/types/interfaces\";\r\n\r\nfunction Issue() {\r\n  const value = useContext(FeeContext);\r\n  const pcxPrice = value.pcxPrice;\r\n  const { currentAccount } = useAccountModel();\r\n  const { t } = useTranslation();\r\n  const [confirmationIssue, setConfirmationIssue] = useState(false);\r\n  const [rpcVaultInfo, setRpcVaultInfo] = useState<RpcVaultInfo | null>(null);\r\n  const [IssueAmount, setIssueAmount] = useState(0);\r\n  const [vaultAddress, setVaultAddress] = useState(\"\");\r\n  const [vaultBtcAddress, setVaultBtcAddress] = useState(\"\");\r\n  const [vaultButtonLoading, SetVaultButtonLoading] = useState(false);\r\n  const [vaultInfo, setVaultInfo] = useState();\r\n  const [vault, SetVault] = useState([]);\r\n  const [vaultCollateral,setVaultCollateral] = useState()\r\n  const { api, isApiReady } = useApi();\r\n  const accountInfo = useAccountInfo(currentAccount?.address!!);\r\n  async function ConfirmationIssueTrade() {\r\n    const injector = await web3FromAddress(currentAccount!!.address);\r\n    api.tx.xGatewayBitcoinV2\r\n      .requestIssue(vaultAddress,IssueAmount * 100000000)\r\n      .signAndSend(\r\n        currentAccount!!.address,\r\n        { signer: injector.signer },\r\n        ({ status, dispatchError, events }) => {\r\n          if (status.isInBlock) {\r\n            notification[\"success\"]({\r\n              message: `Completed at block hash ${status.asInBlock.toString()}`,\r\n              duration: 0,\r\n            });\r\n          } else if (dispatchError) {\r\n            if (dispatchError.isModule) {\r\n              const decoded = api.registry.findMetaError(\r\n                dispatchError.asModule\r\n              );\r\n              const { documentation, name, section } = decoded;\r\n              notification[\"error\"]({\r\n                message: `${section}.${name}: ${documentation.join(\" \")}`,\r\n                duration: 0,\r\n              });\r\n            }\r\n          } else {\r\n            notification[\"success\"]({\r\n              message: `Current status: ${status.type}`,\r\n              duration: 0,\r\n            });\r\n            if (status.type === \"Finalized\") {\r\n              setConfirmationIssue(false);\r\n            }\r\n          }\r\n        }\r\n      )\r\n      .catch((error) => {\r\n        notification[\"error\"]({\r\n          message: `:( transaction failed', ${error}`,\r\n          duration: 0,\r\n        });\r\n      });\r\n  }\r\n\r\n  const handleMatchVault = async () => {\r\n    if (IssueAmount <= 0) {\r\n      notification.warn({ message: \"发行的值必须大于0\" });\r\n      return;\r\n    }\r\n    const vaults = await api.query.xGatewayBitcoinV2.vaults.entries();\r\n    const results = await Promise.all(\r\n    vaults.map(async ([key, value]) => {\r\n      const vault = value.unwrap();\r\n      const collateral = await (await api.query.system.account(vault.id)).data.reserved;\r\n      const maxToken = collateral.muln(pcxPrice).divn(3);\r\n      return [vault.id, maxToken.sub(vault.issuedTokens).sub(vault.toBeIssuedTokens), vault.wallet]\r\n    }))\r\n    setVaultAddress(\r\n      results ? ChangeChainXAddress(JSON.parse(JSON.stringify(results))[0][0]) : \"\"\r\n    );\r\n    setVaultBtcAddress(results ? JSON.parse(JSON.stringify(results))[0][2] : \"\");\r\n    setConfirmationIssue(true);\r\n    SetVaultButtonLoading(false);\r\n  }\r\n  return (\r\n    <IssueStyle>\r\n      <CurrentAccountStyle>\r\n        <div>{t(\"Current Account\")}</div>\r\n        <div className={\"current-account\"}>{currentAccount?.address}</div>\r\n      </CurrentAccountStyle>\r\n      <IssueBtcInputStyle>\r\n        <img src={btcLogo} alt=\"\" />\r\n        <InputNumber\r\n          value={IssueAmount}\r\n          onChange={(e) => {\r\n            if (e) {\r\n              setIssueAmount(e);\r\n            } else {\r\n              setIssueAmount(0);\r\n            }\r\n          }}\r\n        />\r\n        <div className={\"btc-title\"}>BTC</div>\r\n      </IssueBtcInputStyle>\r\n      <PCXbalanceStyle>\r\n        PCX {t(\"balance\")} {FormatBalance(accountInfo?.data.free)}\r\n      </PCXbalanceStyle>\r\n      <LockingCollateralStyle>\r\n        <div className={\"locking-title\"}>{t(\"Locking collateral\")}</div>\r\n        <div className={\"locking-num\"}>\r\n          {IssueAmount / pcxPrice / 10 || 0} PCX\r\n        </div>\r\n        <div className={\"locking-tip\"}>{t(\"Unlock after completion\")}</div>\r\n      </LockingCollateralStyle>\r\n      <Divider />\r\n      <IssueFooterStyle>\r\n        <div className={\"issue-footer-title\"}>{t(\"You will receive\")}</div>\r\n        <div className={\"issue-footer-num\"}>{IssueAmount} XBTC</div>\r\n        <Button loading={vaultButtonLoading} onClick={handleMatchVault}>\r\n          {t(\"next\")}\r\n        </Button>\r\n      </IssueFooterStyle>\r\n\r\n      <ConfirmationIssueModalStyle>\r\n        <Modal\r\n          title={t(\"Confirmation of issuance\")}\r\n          getContainer={false}\r\n          visible={confirmationIssue}\r\n          onCancel={() => setConfirmationIssue(false)}\r\n          footer={[\r\n            <Button key=\"back\" onClick={ConfirmationIssueTrade}>\r\n              {t(\"next\")}\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <CurrentAccountStyle>\r\n            <div>{t(\"Current Account\")}</div>\r\n            <div className={\"current-account\"}>{currentAccount?.address}</div>\r\n          </CurrentAccountStyle>\r\n          <LockingCollateralStyle>\r\n            <div className={\"locking-title\"}>{t(\"Locking collateral\")}</div>\r\n            <div className={\"locking-num\"}>\r\n              {IssueAmount / pcxPrice / 10 || 0} PCX\r\n            </div>\r\n            <div className={\"locking-tip\"}>{t(\"Unlock after completion\")}</div>\r\n          </LockingCollateralStyle>\r\n          <ConfirmationIssueModalFooter>\r\n            <div className={\"issue-footer-title\"}>{t(\"You will receive\")}</div>\r\n            <div className={\"issue-footer-num\"}>{IssueAmount} XBTC</div>\r\n          </ConfirmationIssueModalFooter>\r\n          <VaultAccountStyle>\r\n            <div>{t(\"Vault\")}</div>\r\n            <div className={\"current-account\"}>\r\n              {vaultAddress\r\n                ? encodeAddress(decodeAddress(vaultAddress), 44)\r\n                : \"\"}\r\n            </div>\r\n          </VaultAccountStyle>\r\n          <VaultAccountStyle>\r\n            <div>{t(\"BTC address of Vault\")}</div>\r\n            <div className={\"current-account\"}>{vaultBtcAddress}</div>\r\n          </VaultAccountStyle>\r\n        </Modal>\r\n      </ConfirmationIssueModalStyle>\r\n    </IssueStyle>\r\n  );\r\n}\r\n\r\nexport default Issue;\r\n","import {useApi} from \"./useApi\";\r\nimport {useEffect,useState} from 'react';\r\nfunction useXbtcAssets(account:string, n:number){\r\n    const {api} = useApi();\r\n    const [XbtcBalance,setXbtcBalance] = useState(0)\r\n    useEffect(()=> {\r\n        async function getAssets(account: string) {\r\n            const res = await api.query.xAssets.assetBalance(account,1);\r\n            setXbtcBalance((JSON.parse(JSON.stringify(res)).Usable / 100000000) )\r\n        }\r\n        getAssets(account);\r\n    },[account,n])\r\n    return {XbtcBalance,setXbtcBalance}\r\n}\r\n\r\nexport default useXbtcAssets;","import React, { useEffect, useState } from \"react\";\r\nimport {BtcAddressStyle, RedeemBtcInputStyle, RedeemFooterStyle, RedeemStyle, XBtcBalanceStyle} from \"./style\";\r\nimport btcLogo from '../Issue/icons/btc.svg'\r\nimport {Button, Divider, Input, InputNumber, notification} from \"antd\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport useXbtcAssets from \"../../hooks/useXbtcAssets\"\r\nimport useAccountModel from \"../../hooks/useAccountModel\"\r\nimport { web3FromAddress } from \"@polkadot/extension-dapp\";\r\nimport { useApi } from \"../../hooks/useApi\";\r\nvar WAValidator = require('wallet-address-validator');\r\nfunction Redeem() {\r\n    const {currentAccount} = useAccountModel();\r\n    const {t} = useTranslation()\r\n    const [RedeemAmount,setRedeemAmount] = useState(0)\r\n    const [BtcAddress,setBtcAddress] = useState(\"\")\r\n    const [n,setN] = useState(0)\r\n    const {api, isApiReady} = useApi();\r\n    const {XbtcBalance} = useXbtcAssets(currentAccount?.address!!,n)\r\n    const handleReedem = async()=>{\r\n        let valid =  WAValidator.validate(BtcAddress,'BTC')\r\n        if(!valid){\r\n            notification.warn({message: \"请输入合法的BTC地址\"});\r\n            return\r\n        }\r\n        if(RedeemAmount <= 0){\r\n            notification.warn({message: \"赎回的值必须大于0\"});\r\n            return\r\n        }\r\n        const injector = await web3FromAddress(currentAccount!!.address)\r\n        api.tx.xGatewayBitcoinV2.requestRedeem(currentAccount!!.address,RedeemAmount * 100000000,BtcAddress)\r\n        .signAndSend(currentAccount!!.address,{signer:injector.signer},({status,dispatchError,events})=>{\r\n            if(status.isInBlock){\r\n                notification['success']({\r\n                    message: `Completed at block hash ${ status.asInBlock.toString()}`,\r\n                    duration: 0\r\n                })\r\n            }else if(dispatchError){\r\n                if(dispatchError.isModule){\r\n                    const decoded = api.registry.findMetaError(dispatchError.asModule);\r\n                    const { documentation, name, section } = decoded;\r\n                    notification['error']({\r\n                        message: `${section}.${name}: ${documentation.join(' ')}`,\r\n                        duration: 0\r\n                    })\r\n                }\r\n            }else{\r\n                notification['success']({\r\n                    message: `Current status: ${status.type}`,\r\n                    duration: 0\r\n                })\r\n                if(status.type === \"Finalized\"){\r\n                    setN(n + 1)\r\n                }\r\n            }\r\n        }).catch((error)=> {\r\n            notification['error']({\r\n                message: `:( transaction failed', ${error}`,\r\n                duration: 0\r\n            })\r\n        })\r\n    }\r\n\r\n    return (\r\n        <RedeemStyle>\r\n            <RedeemBtcInputStyle>\r\n                <img src={btcLogo} alt=\"\"/>\r\n                <InputNumber value={RedeemAmount} onChange={(e)=> setRedeemAmount(e)}/>\r\n                <div className={\"btc-title\"}>BTC</div>\r\n            </RedeemBtcInputStyle>\r\n            <XBtcBalanceStyle>\r\n                {t('X-BTC balances')} {XbtcBalance ? XbtcBalance : \"0\"}\r\n            </XBtcBalanceStyle>\r\n            <BtcAddressStyle>\r\n                <div className={\"btc-address-info\"}>\r\n                    <div className={\"btc-address-title\"}>{t('BTC address')}</div>\r\n                    <div className={\"btc-fee\"}>{t('Bitcoin Network Transaction Fees')} 0.0001 BTC</div>\r\n                </div>\r\n                <Input value={BtcAddress} onChange={(e)=> setBtcAddress(e.target.value)}/>\r\n            </BtcAddressStyle>\r\n            <Divider/>\r\n            <RedeemFooterStyle>\r\n                <div className={\"redeem-footer-title\"}>\r\n                    {t('You will receive')}\r\n                </div>\r\n                <div className={\"redeem-footer-num\"}>\r\n                    {RedeemAmount} BTC\r\n                </div>\r\n                <Button onClick={handleReedem}>\r\n                    {t('next')}\r\n                </Button>\r\n            </RedeemFooterStyle>\r\n        </RedeemStyle>\r\n    )\r\n}\r\n\r\nexport default Redeem;\r\n","import styled from \"styled-components\";\n\nexport const TransactionBubbleStyle = styled.div`\n  margin-right: 24px;\n  margin-top: 24px;\n`\nexport const IssueBubbleStyle = styled.div`\n  width: 400px;\n  height: 88px;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  padding: 20px 24px;\n  margin-bottom: 16px;\n  justify-content: space-between;\n  img{\n    width: 16px;\n    height: 16px;\n  }\n  .transaction-confirmation{\n    display: flex;\n    font-size: 16px;\n    .confirmation-num{\n      margin-left: 8px;\n      font-weight: bold;\n    }\n    .confirmation-sum{\n      color: #8E8E8E;\n      font-weight: bold;\n    }\n  }\n  .circle{\n    width: 40px;\n    height: 40px;\n    background: #34C69A;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    color: #FFFFFF;\n    font-weight: bold;\n  }\n  .btc-amount{\n    font-size: 16px;\n    color: #282828;\n    font-weight: bold;\n  }\n`\n\nexport const RedeemBubbleStyle = styled.div`\n  width: 400px;\n  height: 88px;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  padding: 20px 24px;\n  margin-bottom: 16px;\n  justify-content: space-between;\n  img{\n    width: 16px;\n    height: 16px;\n  }\n  .remaining-time-title{\n    display: flex;\n    font-size: 16px;\n    .remaining-time{\n      font-weight: bold;\n      margin-left: 8px;\n      color: #EA754B;\n    }\n  }\n  .circle{\n    width: 40px;\n    height: 40px;\n    background: #EA754B;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    color: #FFFFFF;\n    font-weight: bold;\n  }\n  .btc-amount{\n    font-size: 16px;\n    color: #282828;\n    font-weight: bold;\n  }\n`\n\n","export default __webpack_public_path__ + \"static/media/insert.465562f4.svg\";","import React, { FC, FunctionComponentElement } from \"react\";\r\nimport { IssueBubbleStyle } from \"./style\";\r\nimport enterLogo from \"./icons/insert.svg\";\r\nimport { useTranslation } from \"react-i18next\";\r\ninterface IssueBubbleProps {\r\n  onClick: () => void;\r\n  BtcAmout: number\r\n}\r\n\r\nconst IssueBubble: FC<IssueBubbleProps> = ({onClick,BtcAmout}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <li onClick={onClick}>\r\n      <IssueBubbleStyle>\r\n        <div className={\"circle\"}>{t('issue')}</div>\r\n        <div className={\"btc-amount\"}>{(+(BtcAmout.toString(10))/100000000).toFixed(5)} XBTC</div>\r\n        <div>\r\n          <img src={enterLogo} alt=\"\" />\r\n        </div>\r\n      </IssueBubbleStyle>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default IssueBubble;\r\n","import React, { FC } from \"react\";\r\nimport enterLogo from \"./icons/insert.svg\";\r\nimport { RedeemBubbleStyle } from \"./style\";\r\nimport {useLeftBlock} from \"../../hooks/useLeftBlock\"\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface RedeemBubbleProps {\r\n  onClick: () => void;\r\n  amount:number;\r\n  openTime:number;\r\n}\r\n\r\nconst RedeemBubble: FC<RedeemBubbleProps> = ({amount,onClick,openTime }) => {\r\n  const leftBlock = useLeftBlock(+openTime);\r\n  const { t } = useTranslation();\r\n  return (\r\n    <li onClick={onClick}>\r\n      <RedeemBubbleStyle>\r\n        <div className={\"circle\"}>{t('Redeem')}</div>\r\n        <div className={\"btc-amount\"}>{(+amount.toString(10)/100000000).toFixed(5)} BTC</div>\r\n        <div className={\"remaining-time-title\"}>\r\n        {t<string>('Remaining time')}\r\n          <div className={\"remaining-time\"}>\r\n            {new Date(leftBlock * 6 * 1000).toISOString().substr(11, 5)}\r\n            </div>\r\n        </div>\r\n        <div>\r\n          <img src={enterLogo} alt=\"\" />\r\n        </div>\r\n      </RedeemBubbleStyle>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default RedeemBubble;\r\n","import {useApi} from \"./useApi\";\r\nimport { useEffect, useState } from \"react\";\r\nexport const useLeftBlock = (openTime: number) => {\r\n     \r\n    const { api } = useApi();\r\n    const [leftBlock, setLeftBlock] = useState(48 * 600);\r\n    useEffect(() => {\r\n        let unsub = api.rpc.chain.subscribeNewHeads(head => {\r\n          setLeftBlock(Math.max(0, 100 + openTime - head.number.toNumber()));\r\n        });\r\n        return () => {\r\n          unsub.then();\r\n        };\r\n      }, []);\r\n    if (!openTime) {\r\n      return 0;\r\n    }\r\n    return leftBlock;\r\n  };","export default __webpack_public_path__ + \"static/media/redWarning.c95c426f.svg\";","export default __webpack_public_path__ + \"static/media/warning2.ae4965d0.svg\";","import React, { useContext, useEffect, useMemo, useState } from \"react\";\r\nimport {\r\n  BridgeCardStyle,\r\n  BridgeStyle,\r\n  CancelRedeemStyle,\r\n  FunctionSwitchButton,\r\n  IssueModalFooter,\r\n  IssueModalStyle,\r\n  IssueModalTip,\r\n  IssueTransferInfoStyle,\r\n  RedeemModalFooterStyle,\r\n  RedeemModalStyle,\r\n  RedeemModalTip,\r\n  RedeemTimeStyle,\r\n  VaultBtcAddressStyle,\r\n  VaultOpReturnStyle,\r\n} from \"./style\";\r\nimport Issue from \"../../components/Issue\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Redeem from \"../../components/Redeem\";\r\nimport IssueBubble from \"../../components/TransactionBubble/IssueBubble\";\r\nimport RedeemBubble from \"../../components/TransactionBubble/RedeemBubble\";\r\nimport { TransactionBubbleStyle } from \"../../components/TransactionBubble/style\";\r\nimport { Button, Modal, notification } from \"antd\";\r\nimport warningLogo from \"./icons/redWarning.svg\";\r\nimport warningLogo2 from \"./icons/warning2.svg\";\r\nimport { useTab } from \"../../hooks/useTab\";\r\nimport { FeeContext } from \"../../hooks/useFeeContext\";\r\nimport useAccountModel from \"../../hooks/useAccountModel\";\r\nimport { IssueRequestsContext } from \"../../hooks/useIssueRequests\";\r\nimport { decodeAddress, encodeAddress } from \"@polkadot/keyring\";\r\nimport { useApi } from \"../../hooks/useApi\";\r\nimport { RedeemRequestsContext } from \"../../hooks/useRedeemRequest\";\r\nimport { stringToHex } from \"@polkadot/util\";\r\nimport { web3FromAddress } from \"@polkadot/extension-dapp\";\r\nimport { useLeftBlock } from \"../../hooks/useLeftBlock\";\r\nimport { useApiReady } from \"../../hooks/useApiReady\";\r\nenum Tab {\r\n  Issue,\r\n  Redeem,\r\n}\r\n\r\nfunction Bridge() {\r\n  const value = useContext(IssueRequestsContext);\r\n  const RedeemData = useContext(RedeemRequestsContext);\r\n  const { currentAccount } = useAccountModel();\r\n  const { api, isApiReady } = useApi();\r\n  const [IssueRequestList,SetIssueRequestList] = useState([] as any[]);\r\n  const [RedeemRequestList,SetRedeemRequestList] = useState([] as any[])\r\n  let polkaAccount = encodeAddress(\r\n    decodeAddress(currentAccount ? currentAccount.address : \"16aVMBpJEdRe3PW2E3AsWENYhoKUaeTfDT6P6fdUCQtiiHVL\"),\r\n    0\r\n  );\r\n  useMemo(() => {\r\n    let AllIssueRequestList: Array<any> = JSON.parse(JSON.stringify(value))\r\n      .requests;\r\n      let issueList = AllIssueRequestList.filter((item) => item.requester === polkaAccount)\r\n    SetIssueRequestList(issueList)\r\n  }, [value])\r\n  useMemo(() => {\r\n    let AllRedeemRequestList: Array<any> = JSON.parse(\r\n      JSON.stringify(RedeemData)\r\n    ).requests;\r\n    let RedeemList = AllRedeemRequestList.filter(\r\n      (item) => item.requester === polkaAccount\r\n    )\r\n    SetRedeemRequestList(RedeemList)\r\n  }, [RedeemData])\r\n\r\n  const [issueModalVisible, SetIssueModalVisible] = useState(false);\r\n  const [RedeemModalVisible, SetRedeemModalVisible] = useState(false);\r\n  const [issueClickId, SetissueClickId] = useState(\"\");\r\n  const [RedeemClickId, SetRedeemClickId] = useState(\"\");\r\n  const [leftBlock, setLeftBlock] = useState(100);\r\n  const { t } = useTranslation();\r\n  const { setActiveTab, isActive } = useTab(Tab.Issue);\r\n  const issueModalData = IssueRequestList.filter(\r\n    (item) => item.id === issueClickId\r\n  );\r\n  const RedeemModalData = RedeemRequestList.filter(\r\n    (item) => item.id === RedeemClickId\r\n  );\r\n  useEffect(() => {\r\n    if (!RedeemModalData[0]) return;\r\n    let unsub = api.rpc.chain.subscribeNewHeads((header) => {\r\n      setLeftBlock(\r\n        Math.max(\r\n          0,\r\n          100 - header.number.toNumber() + +RedeemModalData[0].openTime\r\n        )\r\n      );\r\n    });\r\n    return () => {\r\n      unsub.then();\r\n    };\r\n  }, [RedeemClickId]);\r\n  // async function ConfirmationIssue() {\r\n  //   const injector = await web3FromAddress(currentAccount!!.address);\r\n  //   api.tx.xGatewayBitcoinV2\r\n  //     .executeIssue(parseInt(issueClickId), \"\", \"\", \"\")\r\n  //     .signAndSend(\r\n  //       currentAccount!!.address,\r\n  //       { signer: injector.signer },\r\n  //       ({ status, dispatchError }) => {\r\n  //         if (status.isInBlock) {\r\n  //           notification[\"success\"]({\r\n  //             message: `Completed at block hash ${status.asInBlock.toString()}`,\r\n  //             duration: 0,\r\n  //           });\r\n  //         } else if (dispatchError) {\r\n  //           if (dispatchError.isModule) {\r\n  //             const decode = api.registry.findMetaError(dispatchError.asModule);\r\n  //             const { documentation, name, section } = decode;\r\n  //             notification[\"error\"]({\r\n  //               message: `${section}.${name}: ${documentation.join(\" \")}`,\r\n  //               duration: 0,\r\n  //             });\r\n  //           }\r\n  //         } else {\r\n  //           notification[\"success\"]({\r\n  //             message: `Current status: ${status.type}`,\r\n  //             duration: 0,\r\n  //           });\r\n  //           if (status.type === \"Finalized\") {\r\n  //             SetIssueModalVisible(false);\r\n  //           }\r\n  //         }\r\n  //       }\r\n  //     );\r\n  // }\r\n  async function handleCancelRedemption() {\r\n    const injector = await web3FromAddress(currentAccount!!.address)\r\n    api.tx.xGatewayBitcoinV2.cancelRedeem(RedeemClickId,false)\r\n        .signAndSend(currentAccount!!.address,{signer:injector.signer},({status,dispatchError,events}) => {\r\n            if(status.isInBlock){\r\n                notification['success']({\r\n                    message: `Completed at block hash ${ status.asInBlock.toString()}`,\r\n                    duration: 0\r\n                })\r\n            }else if(dispatchError){\r\n                    if(dispatchError.isModule){\r\n                        const decoded = api.registry.findMetaError(dispatchError.asModule);\r\n                        const { documentation, name, section } = decoded;\r\n                        notification['error']({\r\n                            message: `${section}.${name}: ${documentation.join(' ')}`,\r\n                            duration: 0\r\n                        })\r\n                    }\r\n            }else{\r\n                notification['success']({\r\n                    message: `Current status: ${status.type}`,\r\n                    duration: 0\r\n                })\r\n                if(status.type === \"Finalized\"){\r\n                  SetRedeemModalVisible(false)\r\n                }\r\n            }\r\n        }\r\n        ).catch((error) => {\r\n        notification['error']({\r\n            message: `:( transaction failed', ${error}`,\r\n            duration: 0\r\n        })\r\n    })\r\n  }\r\n  async function handleForceCancel() {\r\n    const injector = await web3FromAddress(currentAccount!!.address)\r\n    api.tx.xGatewayBitcoinV2.cancelRedeem(RedeemClickId,true)\r\n        .signAndSend(currentAccount!!.address,{signer:injector.signer},({status,dispatchError,events}) => {\r\n            if(status.isInBlock){\r\n                notification['success']({\r\n                    message: `Completed at block hash ${ status.asInBlock.toString()}`,\r\n                    duration: 0\r\n                })\r\n            }else if(dispatchError){\r\n                    if(dispatchError.isModule){\r\n                        const decoded = api.registry.findMetaError(dispatchError.asModule);\r\n                        const { documentation, name, section } = decoded;\r\n                        notification['error']({\r\n                            message: `${section}.${name}: ${documentation.join(' ')}`,\r\n                            duration: 0\r\n                        })\r\n                    }\r\n            }else{\r\n                notification['success']({\r\n                    message: `Current status: ${status.type}`,\r\n                    duration: 0\r\n                })\r\n                if(status.type === \"Finalized\"){\r\n                  SetRedeemModalVisible(false)\r\n                }\r\n            }\r\n        }\r\n        ).catch((error) => {\r\n        notification['error']({\r\n            message: `:( transaction failed', ${error}`,\r\n            duration: 0\r\n        })\r\n    })\r\n  }\r\n  return (\r\n    <BridgeStyle>\r\n      <BridgeCardStyle>\r\n        <FunctionSwitchButton>\r\n          <ul>\r\n            <li\r\n              onClick={() => {\r\n                setActiveTab(Tab.Issue);\r\n              }}\r\n              className={isActive(Tab.Issue) ? \"active\" : \"\"}\r\n            >\r\n              {t(\"issue\")}\r\n            </li>\r\n            <li\r\n              onClick={() => {\r\n                setActiveTab(Tab.Redeem);\r\n              }}\r\n              className={isActive(Tab.Redeem) ? \"active\" : \"\"}\r\n            >\r\n              {t(\"Redeem\")}\r\n            </li>\r\n          </ul>\r\n        </FunctionSwitchButton>\r\n        {isActive(Tab.Issue) ? <Issue /> : <Redeem />}\r\n      </BridgeCardStyle>\r\n      <TransactionBubbleStyle>\r\n        <ul>\r\n          {IssueRequestList.map((item) => (\r\n            <IssueBubble\r\n              key={item.id}\r\n              BtcAmout={item.btcAmount}\r\n              onClick={() => {\r\n                SetIssueModalVisible(true);\r\n                SetissueClickId(item.id);\r\n              }}\r\n            />\r\n          ))}\r\n          {RedeemRequestList.map((item) => (\r\n            <RedeemBubble\r\n              key={item.id}\r\n              amount={item.amount}\r\n              openTime={item.openTime}\r\n              onClick={() => {\r\n                SetRedeemModalVisible(true);\r\n                SetRedeemClickId(item.id);\r\n              }}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </TransactionBubbleStyle>\r\n      <IssueModalStyle>\r\n        <Modal\r\n          visible={issueModalVisible}\r\n          onCancel={() => SetIssueModalVisible(false)}\r\n          footer={null}\r\n          getContainer={false}\r\n          title={\"请尽快完成转账\"}\r\n        >\r\n          <IssueModalTip>\r\n            <img src={warningLogo} alt=\"\" />\r\n            <div>若未在3天内完成，您将失去锁定的抵押品</div>\r\n          </IssueModalTip>\r\n          <IssueTransferInfoStyle>\r\n            <div className={\"info-title\"}>转账金额</div>\r\n            <div className={\"transfer-amount\"}>\r\n              {issueModalData.length > 0\r\n                ? (+issueModalData[0].btcAmount.toString(10)/100000000).toFixed(5)\r\n                : 0}{\" \"}\r\n              BTC\r\n            </div>\r\n            <div className={\"transfer-tip\"}>\r\n              <img src={warningLogo2} alt=\"\" />\r\n              <div>请在单笔交易中转账,否则会造成资产损失</div>\r\n            </div>\r\n          </IssueTransferInfoStyle>\r\n          <VaultBtcAddressStyle>\r\n            <div className={\"title\"}>资产保险库的比特币地址</div>\r\n            <div className={\"address\"}>\r\n              {issueModalData.length > 0 ? issueModalData[0].btcAddress : \"\"}\r\n            </div>\r\n          </VaultBtcAddressStyle>\r\n          <VaultOpReturnStyle>\r\n            <div className={\"title\"}>OP_RETURN</div>\r\n            <div className={\"address\"}>\r\n              {stringToHex(\r\n                issueModalData.length > 0 ? issueModalData[0].btcAddress : \"\"\r\n              ).substring(2,99)}\r\n            </div>\r\n          </VaultOpReturnStyle>\r\n          <IssueModalFooter>\r\n            <ul>\r\n              <li>\r\n                <div className={\"title\"}>发送请求标识</div>\r\n                <div className={\"content\"}>\r\n                  {issueModalData.length > 0\r\n                    ? +issueModalData[0].id.toString(10)\r\n                    : \"\"}\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className={\"title\"}>发行数量</div>\r\n                <div className={\"content\"}>\r\n                  {issueModalData.length > 0\r\n                    ? (parseInt(issueModalData[0].btcAmount)/100000000).toFixed(5)\r\n                    : 0}{\" \"}\r\n                  XBTC\r\n                </div>\r\n              </li>\r\n              {/* <li>\r\n                <div className={\"title\"}>交易确认数量</div>\r\n                <div className={\"content\"}>-</div>\r\n              </li> */}\r\n            </ul>\r\n          </IssueModalFooter>\r\n          {/* <Button onClick={ConfirmationIssue}>确认交易</Button> */}\r\n        </Modal>\r\n      </IssueModalStyle>\r\n      <RedeemModalStyle>\r\n        <Modal\r\n          visible={RedeemModalVisible}\r\n          onCancel={() => SetRedeemModalVisible(false)}\r\n          footer={null}\r\n          getContainer={false}\r\n          title={t(\"Redeem\")}\r\n        >\r\n          <RedeemModalTip>\r\n            <img src={warningLogo} alt=\"\" />\r\n            <div>\r\n              {t(\r\n                \"If you do not receive the redeemed BTC within 48 hours, you can make a redemption request again after the cancellation of redemption or forced redemption. If you choose forced redemption, you will receive the equivalent PCX immediately\"\r\n              )}\r\n            </div>\r\n          </RedeemModalTip>\r\n          <RedeemTimeStyle>\r\n            <div className={\"title\"}>{t(\"Remaining time\")}</div>\r\n            <div className={\"time\"}>\r\n              {new Date(leftBlock * 6 * 1000).toISOString().substr(11, 5)}\r\n            </div>\r\n          </RedeemTimeStyle>\r\n          <CancelRedeemStyle>\r\n            <Button disabled={leftBlock !== 0} onClick={handleCancelRedemption}>\r\n              {t(\"Cancel redemption\")}\r\n            </Button>\r\n            <div onClick={handleForceCancel} className={\"force-redeem\"}>\r\n              {t(\"Forcible redemption\")}\r\n            </div>\r\n          </CancelRedeemStyle>\r\n          <RedeemModalFooterStyle>\r\n            <ul>\r\n              <li>\r\n                <div className={\"title\"}>{t(\"Request ID\")}</div>\r\n                <div className={\"content\"}>\r\n                  {RedeemModalData.length > 0\r\n                    ? +RedeemModalData[0].id.toString(10)\r\n                    : \"\"}\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className={\"title\"}>{t(\"Amount\")}</div>\r\n                <div className={\"content\"}>\r\n                  {\" \"}\r\n                  {RedeemModalData.length > 0\r\n                    ? (+RedeemModalData[0].amount.toString(10)/100000000).toFixed(5)\r\n                    : 0}{\" \"}\r\n                  XBTC\r\n                </div>\r\n              </li>\r\n              {/* <li>\r\n                <div className={\"title\"}>{t(\"Confirmation\")}</div>\r\n                <div className={\"content\"}>-</div>\r\n              </li> */}\r\n            </ul>\r\n          </RedeemModalFooterStyle>\r\n        </Modal>\r\n      </RedeemModalStyle>\r\n    </BridgeStyle>\r\n  );\r\n}\r\n\r\nexport default Bridge;\r\n","import { useState } from \"react\";\r\n\r\nexport function useTab<T>(value: T) {\r\n  const [activeTab, setActiveTab] = useState<T>(value);\r\n  const isActive = (tab: T) => tab === activeTab;\r\n  return { activeTab, setActiveTab, isActive };\r\n}\r\n"],"sourceRoot":""}